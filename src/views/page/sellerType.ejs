<!DOCTYPE html>
<html lang="en">

<head>

    <%- include('../partials/head.ejs') %>
    <link rel="stylesheet" href="/toastr/toastr.min.css"> <!-- tiene que despues del CDN de bootstrap -->
    <script src="/toastr/toastr.min.js"></script>
    <title>Blissenet Car Buy</title>

</head>
<style>


    .toast-success {
        /* Esta clase es unicamente para dar color al alert toastr de tipo success que debe ser violeta */
        background-color: #6f42c1; /* Azul tirando a morado */
        color: white; /* Color del texto */
    } 

    @media screen and (min-width: 290px) and (max-width: 499px ){

    
    }

</style>

<body class="mainTheme" style="max-width: 100vw; min-height: 100vh;">
    <main class="themaTextLight" style="max-width: 100% !important;">

        <%- include('../partials/navi-simple.ejs') %>

        
        <%# if (catchError){ %>
            <%#- include('../alert/catchError.ejs') %> 
        <%# }; %>


        <% if (user) { %>

            <% const seeMarket = user.seeMarket %>
            <% const idUser = user._id %>
            <% const sellerType = searchProfile.sellerType %> <!-- esto es un objeto que tiene tres constantes local, Interurbano, internacional -->
            
            <input type="hidden" value="<%= seeMarket.countryMarketCode %>" id="seeMarket">
            <input type="hidden" value="<%= idUser %>" id= "idUser">
            <!-- este bloque me permite validad si el usuario que se logea tiene un meercado definido. sino lo tiene debe obligatoriamente hacerlo. --> 

            <div class="container-fluid d-flex justify-content-start py-2" style="background: linear-gradient(90deg, rgba(146,0,255,1) 0%, rgba(174,65,255,1) 50%, rgba(13,110,253,1) 100%);">
                <span class="ms-2 p-0" style="font-weight: 400; color: #ffde00;"> <b> Tipo de Ventas </b>  </span>
            </div>    
            
            <div class="container-fluid p-0">
                            
                <div class="row m-0 d-flex justify-align-center justify-content-center">
                    
                    <div class="col-xl-10 col-lg-10 col-md-10 col-sm-12 col-12 pt-3 px-1">
                            
                        <% const username = user.username %>
                        <% const indexed = user._id %> <!-- esto es igual al id user -->

                        <% if (searchProfile) {  %> <!-- cuenta con perfil -->
                            
                            <div class="content_search">

                                <div class="card d-flex justify-content-center align-items-center" style="background-color:rgba(217, 223, 223, 0.2);">
                   
                                    <div class="col-lg-10 col-md-11 col-sm-12 col-12 p-3 my-4 rounded-2 shadow-sm"  style="background-color: rgba(209, 209, 209, 0.2)">

                                        <div class="contentainer-fluid ">

                                              
                                            <div class="card-header">
                                                <span style="font-size: 17px;">Tipo de Ventas.</span>
                                            </div>
                                            <div class="card-body">

                                                <div class="container d-flex justify-content-center p-0 mb-3" style="width: 100%;">
                                                    
                                                    <div class="alert">
                                                        <p> <span class="bg-secondary rounded-pill text-light px-2"> Local :</span> Ventas que puedes tener en tu misma Ciudad, son ventas cuyas entregas pueden ser realizadas usando deliveris.</p>
                                                        <p> <span class="bg-secondary rounded-pill text-light px-2"> Estadal :</span> Ventas que puedes tener en todo el Estado o Provincia, son ventas cuyas entregas requeriras de currier.</p>
                                                        <p> <span class="bg-secondary rounded-pill text-light px-2"> Nacional :</span> Ventas que puedes tener en tu Pais, son ventas cuyas entregas pueden ser realizadas usando currier.</p>
                                                        <p> <span class="bg-secondary rounded-pill text-light px-2"> Internacional :</span> Ventas que puedes tener en cualquier País del mundo, son ventas cuyas entregas pueden ser realizadas usando agentes de carga o agentes de aduanales.</p>
                                                    </div>
                                                
                                                </div>
                                                                                                
                                                <div class="containerTools p-0 my-1">

                                                    <div class="borderCountry border rounded-3">
                                                        <div class="containerSearch d-flex justify-content-between p-2 my-0 rounded-2 " style="width: 100%; background-color: rgb(228, 228, 228, 0.3);">
                                                        <!--  cantidad de articulos para habilitar la opcion de busqueda -->
                                                            <div class="contentSoonSearch d-flex">
                                                            <% if(sumCount >= 1) { %>    
                                                                <label class="form-check-label no-select p-0 me-2" for="CheckSearch" title="Debes tener al menos un (1) anuncio para habilitar esta opción.">
                                                                    <div class="spinner-grow spinner-grow-sm me-2" role="status">
                                                                        <span class="visually-hidden">Loading...</span>
                                                                    </div>
                                                                    Local
                                                                </label>
                                                                
                                                                <div class="form-check form-switch ms-2">
                                                                                                
                                                                    <% if ( sellerType.local === "true" ){%>  
                                                                        <input class="form-check-input localInput" type="checkbox" id="CheckSearch" name="local" value= false checked> 
                                                                    <% } else { %>
                                                                        <input class="form-check-input localInput" type="checkbox" id="CheckSearch" name="local" value= true > 
                                                                    <% }; %>
                                                                    
                                                                </div>
                                                            <% } else { %>
                                                                <label class="form-check-label no-select p-0 me-2" for="CheckSearch"  title="Debes tener al menos un (1) anuncio para habilitar esta opción.">
                                                                  ○ Local </label>
                                                                <div class="form-check form-switch">
                                                                    <input class="form-check-input" type="checkbox" disabled> <i class="bi bi-lock ms-1"></i>                                                                      
                                                                </div>
                                                            <% }; %>
                                                            </div> 
                                                            <div class="cursor-pointer info-icon" data-bs-toggle="modal" data-bs-target="#staticCheckLocal"> <i class="bi bi-info-circle mx-1"></i> </div>       
                                                        </div>

                                                        <div class="containerSearch d-flex justify-content-between p-2 my-0 rounded-2 " style="width: 100%; background-color: rgb(228, 228, 228, 0.3);">
                                                        <!--  cantidad de articulos para habilitar la opcion de busqueda -->
                                                            <div class="contentSoonSearch d-flex">
                                                            <% if(sumCount >= 1) { %>    
                                                                <label class="form-check-label no-select p-0 me-2" for="CheckEstadal" title="Debes tener al menos un (1) anuncio para habilitar esta opción.">
                                                                    <div class="spinner-grow spinner-grow-sm me-2" role="status">
                                                                        <span class="visually-hidden">Loading...</span>
                                                                    </div>
                                                                    Estadal
                                                                </label>
                                                                
                                                                <div class="form-check form-switch ms-2">
                                                                                                
                                                                    <% if ( sellerType.estadal === "true" ){%>  
                                                                        <input class="form-check-input estadalInput" type="checkbox" id="CheckEstadal" name="estadal" value= false checked> 
                                                                    <% } else { %>
                                                                        <input class="form-check-input estadalInput" type="checkbox" id="CheckEstadal" name="estadal" value= true > 
                                                                    <% }; %>
                                                                    
                                                                </div>
                                                            <% } else { %>
                                                                <label class="form-check-label no-select p-0 me-2" for="CheckSearch"  title="Debes tener al menos un (1) anuncio para habilitar esta opción.">
                                                                  ○ Estadal </label>
                                                                <div class="form-check form-switch">
                                                                    <input class="form-check-input" type="checkbox" disabled> <i class="bi bi-lock ms-1"></i>                                                                      
                                                                </div>
                                                            <% }; %>
                                                            </div> 
                                                            <div class="cursor-pointer info-icon" data-bs-toggle="modal" data-bs-target="#staticCheckEstadal"> <i class="bi bi-info-circle mx-1"></i> </div>       
                                                        </div>

                                                        <div class="containerSearch d-flex justify-content-between p-2 my-0 rounded-2 " style="width: 100%; background-color: rgb(228, 228, 228, 0.3);">
                                                        <!--  cantidad de articulos para habilitar la opcion de busqueda -->
                                                            <div class="contentSoonSearch d-flex">
                                                            <% if(sumCount >= 1) { %>    
                                                                <label class="form-check-label no-select p-0 me-2" for="CheckNacional" title="Debes tener al menos un (1) anuncio para habilitar esta opción.">
                                                                    <div class="spinner-grow spinner-grow-sm me-2" role="status">
                                                                        <span class="visually-hidden">Loading...</span>
                                                                    </div>
                                                                    Nacional
                                                                </label>
                                                                
                                                                <div class="form-check form-switch ms-2">
                                                                                                
                                                                    <% if ( sellerType.nacional === "true" ){%>  
                                                                        <input class="form-check-input nacionalInput" type="checkbox" id="CheckNacional"  name="nacional" value= false checked> 
                                                                    <% } else { %>
                                                                        <input class="form-check-input nacionalInput" type="checkbox" id="CheckNacional" name="nacional" value= true > 
                                                                    <% }; %>
                                                                    
                                                                </div>
                                                            <% } else { %>
                                                                <label class="form-check-label no-select p-0 me-2" for="CheckSearch"  title="Debes tener al menos un (1) anuncio para habilitar esta opción.">
                                                                  ○ Nacional 
                                                                </label>
                                                                <div class="form-check form-switch">
                                                                    <input class="form-check-input" type="checkbox" disabled> <i class="bi bi-lock ms-1"></i>                                                                      
                                                                </div>
                                                            <% }; %>
                                                            </div> 
                                                            <div class="cursor-pointer info-icon" data-bs-toggle="modal" data-bs-target="#staticCheckNacional"> <i class="bi bi-info-circle mx-1"></i> </div>       
                                                        </div>
                                                    </div>    

                                                    <div class="borderOutCountry border rounded-3 my-3">
                                                        <div class="containerSearch d-flex justify-content-between p-2 my-0 rounded-2 " style="width: 100%; background-color: rgb(228, 228, 228, 0.3);">
                                                        <!--  cantidad de articulos para habilitar la opcion de busqueda -->
                                                            <div class="contentSoonSearch d-flex">
                                                            <% if(sumCount >= 1) { %>    
                                                                <label class="form-check-label no-select p-0 me-2" for="CheckInternacional" title="Debes tener al menos un (1) anuncio para habilitar esta opción.">
                                                                    <div class="spinner-grow spinner-grow-sm me-2" role="status">
                                                                        <span class="visually-hidden">Loading...</span>
                                                                    </div>
                                                                    Internacional
                                                                </label>
                                                                
                                                                <div class="form-check form-switch ms-2">
                                                                                                
                                                                    <% if ( sellerType.internacional === "true" ){%>  
                                                                        <input class="form-check-input internacionalInput" type="checkbox" id="CheckInternacional"  name="internacional" value= false checked> 
                                                                    <% } else { %>
                                                                        <input class="form-check-input internacionalInput" type="checkbox" id="CheckInternacional" name="internacional" value= true > 
                                                                    <% }; %>
                                                                    
                                                                </div>
                                                            <% } else { %>
                                                                <label class="form-check-label no-select p-0 me-2" for="CheckSearch"  title="Debes tener al menos un (1) anuncio para habilitar esta opción.">
                                                                    ○ Internacional
                                                                </label>
                                                                <div class="form-check form-switch">
                                                                    <input class="form-check-input" type="checkbox" disabled> <i class="bi bi-lock ms-1"></i>                                                                      
                                                                </div>
                                                            <% }; %>
                                                            </div> 
                                                            <div class="cursor-pointer info-icon" data-bs-toggle="modal" data-bs-target="#staticCheckInternacional"> <i class="bi bi-info-circle mx-1"></i> </div>       
                                                        </div>
                                                    </div>    

                                                </div>

                                                <div class="containerIrATienda d-flex">

                                                    <div class="row m-0 rounded-2 py-2 px-1" style="background-color: rgba(255, 255, 255, 0.6); width: 100%; height: 100%;">
                                                        

                                                            <div class="col-lg-6 col-md-6 col-sm-12 form-group p-0 m-0">
                                                                <a href="/tools" class="mt-1 btn btn-secondary text-light text-decoration-none rounded-3 form-control" style="width: 99%;">
                                                                    <i class="bi bi-gear me-1"></i> Herramientas
                                                                </a>
                                                            </div>
                                                            <div class="col-lg-6 col-md-6 col-sm-12 form-group p-0 m-0"> 
                                                                <a href="/account/<%= user.username %>" class="mt-1 btn btn-primary text-decoration-none rounded-3 form-control" style="width: 99%;">
                                                                    <i class="bi bi-shop-window me-1"></i> Mi Tienda
                                                                </a>   
                                                            </div> 
                                                            
                                                            
                                                    </div>
                                                
                                                </div>

                                            </div>
                                         

                                        </div>

                                    </div>

                                </div>

                            </div>  


                            <div class="card mt-1" style="background-color:rgba(217, 223, 223, 0.2);">
                                <div class="card-body d-flex justify-content-center ">
                                   <a href="/" class="text-decoration-none" style="color: inherit">  <span id="logoBlissenet_com"> </span> </a> 
                                </div>
                            </div>

                            <!-- Modal checkLocal --> <!--lo activa > data-bs-toggle="modal" data-bs-target="#staticSuicheSegment" -->
                            <div class="modal fade" id="staticCheckLocal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabelH2" aria-hidden="true">
                                <div class="modal-dialog border border-secondary p-2 rounded-3" style="background-color: rgb(0, 0, 0, 0.3);">
                                    <div class="modal-content text-dark">

                                        <div class="modal-header">
                                            <h5 class="modal-title" id="staticBackdropLabelH2">Tipo de Ventas</h5>
                                            <i class="bi bi-x-lg cursor-pointer" data-bs-dismiss="modal"></i>
                                        </div>
                                        <div class="modal-body">
                                            <p><span class="fw-bold text-primary">Venta de tipo Local. </span>
                                               "Esta configuración te permite vender únicamente a clientes ubicados en tu misma ciudad, excluyendo el resto. Es ideal para tiendas que no pueden abastecer áreas muy extensas."
                                            </p>
                                            <p> <span class="bg-dark py-1 px-2 rounded-2"> <b class="text-info">Requerimento : 1 Anuncio</b>  </span> </p>
                                        </div>
                                        <div class="modal-footer" style="background-image: url('/img/bannerSellerType.jpg'); background-size: cover; background-position: center;">
                                            <button type="button" class="btn btn-dark" data-bs-dismiss="modal">Cerrar</button>
                                        </div>
                                    </div>
                                </div>
                            </div> 

                            <!-- Modal checkEstadal --> <!--lo activa > data-bs-toggle="modal" data-bs-target="#staticSuicheSegment" -->
                            <div class="modal fade" id="staticCheckEstadal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabelH2" aria-hidden="true">
                                <div class="modal-dialog border border-secondary p-2 rounded-3" style="background-color: rgb(0, 0, 0, 0.3);">
                                    <div class="modal-content text-dark">

                                        <div class="modal-header">
                                            <h5 class="modal-title" id="staticBackdropLabelH2">Tipo de Ventas</h5>
                                            <i class="bi bi-x-lg cursor-pointer" data-bs-dismiss="modal"></i>
                                        </div>
                                        <div class="modal-body">
                                            <p><span class="fw-bold text-primary">Venta de tipo Estadal. </span>
                                                "Esta configuración te permite vender únicamente a clientes ubicados en tu mismo estado o provincia, excluyendo el resto del país. Es ideal para tiendas que pueden abastecer áreas extensas dentro de esa región, pero no fuera de ella."
                                            </p>
                                            <p> <span class="bg-dark py-1 px-2 rounded-2"> <b class="text-info">Requerimento : 1 Anuncio</b>  </span> </p>
                                        </div>
                                        <div class="modal-footer" style="background-image: url('/img/bannerSellerType.jpg'); background-size: cover; background-position: center;">
                                            <button type="button" class="btn btn-dark" data-bs-dismiss="modal">Cerrar</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Modal checkNacional --> <!--lo activa > data-bs-toggle="modal" data-bs-target="#staticSuicheSegment" -->
                            <div class="modal fade" id="staticCheckNacional" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabelH2" aria-hidden="true">
                                <div class="modal-dialog border border-secondary p-2 rounded-3" style="background-color: rgb(0, 0, 0, 0.3);">
                                    <div class="modal-content text-dark">

                                        <div class="modal-header">
                                            <h5 class="modal-title" id="staticBackdropLabelH2">Tipo de Ventas</h5>
                                            <i class="bi bi-x-lg cursor-pointer" data-bs-dismiss="modal"></i>
                                        </div>
                                        <div class="modal-body">
                                            <p><span class="fw-bold text-primary">Venta de tipo Nacional. </span>
                                                "Esta configuración te permite vender a clientes ubicados dentro de tu mismo país. Es ideal para tiendas que pueden abastecer a todo el territorio nacional."
                                            </p>
                                            <p> <span class="bg-dark py-1 px-2 rounded-2"> <b class="text-info">Requerimento : 1 Anuncio</b>  </span> </p>
                                        </div>
                                        <div class="modal-footer" style="background-image: url('/img/bannerSellerType.jpg'); background-size: cover; background-position: center;">
                                            <button type="button" class="btn btn-dark" data-bs-dismiss="modal">Cerrar</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Modal checkInteracional --> <!--lo activa > data-bs-toggle="modal" data-bs-target="#staticSuicheSegment" -->
                            <div class="modal fade" id="staticCheckInternacional" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabelH2" aria-hidden="true">
                                <div class="modal-dialog border border-secondary p-2 rounded-3" style="background-color: rgb(0, 0, 0, 0.3);">
                                    <div class="modal-content text-dark">

                                        <div class="modal-header">
                                            <h5 class="modal-title" id="staticBackdropLabelH2">Tipo de Ventas</h5>
                                            <i class="bi bi-x-lg cursor-pointer" data-bs-dismiss="modal"></i>
                                        </div>
                                        <div class="modal-body">
                                            <p><span class="fw-bold text-primary">Venta de tipo Internacional. </span>
                                               Esta configuración te permite vender a clientes en cualquier parte del mundo. Es ideal para tiendas que ofrecen productos digitales o para empresas que cuentan con los permisos necesarios para exportar."
                                            </p>
                                            <p> <span class="bg-dark py-1 px-2 rounded-2"> <b class="text-info">Requerimento : 1 Anuncio</b>  </span> </p>
                                        </div>
                                        <div class="modal-footer" style="background-image: url('/img/bannerSellerType.jpg'); background-size: cover; background-position: center;">
                                            <button type="button" class="btn btn-dark" data-bs-dismiss="modal">Cerrar</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                        <% } else { %> <!-- cuenta sin perfil -->

                        <% } %>                                                        

                                        
                    </div>

                </div>    

            </div>



         <% } else { %>
            <div class="container-fluid d-flex justify-content-center p-3" style="height: 90%; width: 100%; background-color:  rgb(243, 238, 238); box-shadow: 1px 1px 5px 1px rgb(99, 98, 98);  border-top: 2px ridge  rgb(243, 238, 238);">
               
                <%- include('../partials/noLogin.ejs') %>

            </div>  
         <% }; %>

    </main>
        <%- include('../partials/scripts.ejs') %>
        <%- include('../partials/scriptsOnlyNavi-simpleNoIcons.ejs') %>
        <!-- este cnd es el constructor de QR  se encuentra en https://cdnjs.com/libraries/qrious -->
        <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script> esta sirve tambien pero deje la de abajo, no se cual es la diferencia entre ambas pero este es la cdn para crear los QR-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js" integrity="sha512-pUhApVQtLbnpLtJn6DuzDD5o2xtmLJnJ7oBoMsBnzOkVkpqofGLGPaBJ6ayD2zQe3lCgCibhJBi4cj5wAxwVKA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
       

</body>

    <!-- para cambiar integra el buscardor en la tienda -->
    <script>
                  
        const idUser = document.getElementById('idUser').value;
        const localInput = document.querySelector('.localInput');
        const estadalInput = document.querySelector('.estadalInput');
        const nacionalInput = document.querySelector('.nacionalInput');
        const internacionalInput = document.querySelector('.internacionalInput');
        
        if(localInput){

            localInput.addEventListener('change', ()=>{

            //bloqueamos el suiche para que no puedan volver a darle.
            localInput.setAttribute("disabled", "");

            let localValue = localInput.value;
        
            let dato = {
                idUser : idUser,
                sellerType : "local",
                value : localValue
            }

            console.log("dato: ", dato);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
            fetch('/myaccount/sellerType', {
                method : "POST",
                body : JSON.stringify(dato),
                headers : { "content-type" : "application/json"}
            })
                .then(response => response.json())
                .then(json =>{
                    console.log("respuesta del backend -local-->", json);
                    const code = json.code;
                    const local = json.result.sellerType.local;


                    console.log("code :", code);
                    console.log("local :", local);
                    console.log("typeof local :", typeof local);

                    let response;

                    if (local === "true"){
                        response= `Venta de tipo Local Activado.` 
                    } else {
                        response= `Venta de tipo Local Desactivado.` 
                    }
                    
                    mostrarToast( response , 'right', 'success', '¡Hecho!', true );

                    setTimeout(() => {
                        location.reload();
                    }, 5000);
                })

                .catch(err => console.error(err));
            });

        }

        if(estadalInput){

            estadalInput.addEventListener('change', ()=>{

            //bloqueamos el suiche para que no puedan volver a darle.
            estadalInput.setAttribute("disabled", "");

            let estadalValue = estadalInput.value;
        
            let dato = {
                idUser : idUser,
                sellerType : "estadal",
                value : estadalValue
            }

            console.log("dato: ", dato);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
            fetch('/myaccount/sellerType', {
                method : "POST",
                body : JSON.stringify(dato),
                headers : { "content-type" : "application/json"}
            })
                .then(response => response.json())
                .then(json =>{
                    console.log("respuesta del backend -local-->", json);
                    const code = json.code;
                    const estadal = json.result.sellerType.estadal;


                    console.log("code :", code);
                    console.log("estadal :", estadal);
                    console.log("typeof local :", typeof estadal);

                    let response;

                    if (estadal === "true"){
                        response= `Venta de tipo Estadal Activado.` 
                    } else {
                        response= `Venta de tipo Estadal Desactivado.` 
                    }
                    
                    mostrarToast( response , 'right', 'success', '¡Hecho!', true );

                    setTimeout(() => {
                        location.reload();
                    }, 5000);
                })

                .catch(err => console.error(err));
            });

        }

        if(nacionalInput){

            nacionalInput.addEventListener('change', ()=>{

            //bloqueamos el suiche para que no puedan volver a darle.
            nacionalInput.setAttribute("disabled", "");

            let nacionalValue = nacionalInput.value;
        
            let dato = {
                idUser : idUser,
                sellerType : "nacional",
                value : nacionalValue
            }

            console.log("dato: ", dato);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
            fetch('/myaccount/sellerType', {
                method : "POST",
                body : JSON.stringify(dato),
                headers : { "content-type" : "application/json"}
            })
                .then(response => response.json())
                .then(json =>{
                    console.log("respuesta del backend -local-->", json);
                    const code = json.code;
                    const nacional = json.result.sellerType.nacional;


                    console.log("code :", code);
                    console.log("nacional :", nacional);
                    console.log("typeof nacional :", typeof nacional);

                    let response;

                    if (nacional === "true"){
                        response= `Venta de tipo Nacional Activado.` 
                    } else {
                        response= `Venta de tipo Nacional Desactivado.` 
                    }
                    
                    mostrarToast( response , 'right', 'success', '¡Hecho!', true );

                    setTimeout(() => {
                        location.reload();
                    }, 5000);
                })

                .catch(err => console.error(err));
            });

        }

        if(internacionalInput){

            internacionalInput.addEventListener('change', ()=>{

            //bloqueamos el suiche para que no puedan volver a darle.
            internacionalInput.setAttribute("disabled", "");

            let internacionalValue = internacionalInput.value;
        
            let dato = {
                idUser : idUser,
                sellerType : "internacional",
                value : internacionalValue
            }

            console.log("dato: ", dato);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
            fetch('/myaccount/sellerType', {
                method : "POST",
                body : JSON.stringify(dato),
                headers : { "content-type" : "application/json"}
            })
                .then(response => response.json())
                .then(json =>{
                    console.log("respuesta del backend -local-->", json);
                    const code = json.code;
                    const internacional = json.result.sellerType.internacional;


                    console.log("code :", code);
                    console.log("internacional :", internacional);
                    console.log("typeof internacional :", typeof internacional);

                    let response;

                    if (internacional === "true"){
                        response= `Venta de tipo Nacional Activado.` 
                    } else {
                        response= `Venta de tipo Nacional Desactivado.` 
                    }
                    
                    mostrarToast( response , 'right', 'success', '¡Hecho!', true );

                    setTimeout(() => {
                        location.reload();
                    }, 5000);
                })

                .catch(err => console.error(err));
            });

        }


    </script>

<script>


    function mostrarToast(mensaje, posicion, color, titulo = '', conBotonCerrar = false) {
        // Configuración predeterminada
        toastr.options = {
            "closeButton": conBotonCerrar, // Agregar botón de cerrar si se solicita
            "debug": false,
            "newestOnTop": false,
            "progressBar": !conBotonCerrar, // Si tiene botón de cerrar, no mostrar barra de progreso
            "preventDuplicates": false,
            "onclick": null,
            "showDuration": "600",
            "hideDuration": "1000",
            "timeOut": conBotonCerrar ? false : "8000", // No se oculta automáticamente si tiene botón de cerrar
            "extendedTimeOut": "1000",
            "showEasing": "swing",
            "hideEasing": "linear",
            "showMethod": "fadeIn",
            "hideMethod": "fadeOut"
        };
  
        // Configurar la posición
        switch (posicion) {
            case 'center':
                toastr.options.positionClass = 'toast-top-center';
                break;
            case 'left':
                toastr.options.positionClass = 'toast-top-left';
                break;
            case 'right':
                toastr.options.positionClass = 'toast-top-right';
                break;
            default:
                toastr.options.positionClass = 'toast-top-right'; // Posición predeterminada
        }
  
        // Mostrar el mensaje según el color especificado
        switch (color) {
            case 'success':
                titulo ? toastr.success(mensaje, titulo) : toastr.success(mensaje);
                break;
            case 'info':
                titulo ? toastr.info(mensaje, titulo) : toastr.info(mensaje);
                break;
            case 'warning':
                titulo ? toastr.warning(mensaje, titulo) : toastr.warning(mensaje);
                break;
            case 'danger':
                titulo ? toastr.error(mensaje, titulo) : toastr.error(mensaje);
                break;
            case 'primary':
                titulo ? toastr.info(mensaje, titulo, { toastClass: 'toast-primary' }) : toastr.info(mensaje, '', { toastClass: 'toast-primary' });
                break;
            case 'dark':
                titulo ? toastr.info(mensaje, titulo, { toastClass: 'toast-dark' }) : toastr.info(mensaje, '', { toastClass: 'toast-dark' });
                break;
            default:
                console.warn('Color no válido. Usando el color por defecto (success).');
                titulo ? toastr.success(mensaje, titulo) : toastr.success(mensaje);
        }
    }
  
    //mostrarToast( response , 'right', 'danger', '', true ); // Agrega título aquí
  
</script>
